# Enhanced SM Status File
# Auto-generated and updated by Master SM workflows
# DO NOT EDIT MANUALLY - changes will be overwritten

version: "1.0"
created_at: null
last_updated: null

# Current project being planned
current_project:
  name: null
  domain: null
  status: "idle"  # idle | story_creation | validation | sprint_planning | completed
  started: null
  completed: null

# Epics loaded from Enhanced-PM or BMM-PM
epics_loaded: []
# Example:
# - epic_id: "epic-1"
#   title: "User Authentication"
#   requirements_count: 12
#   file_path: "docs/epics/epic-1-authentication.md"

# Story creation tracking
stories:
  total: 0
  completed: 0
  validated: 0
  needs_refinement: 0

  by_complexity:
    simple: 0   # 1-2 tasks, 1-3 points
    medium: 0   # 3-5 tasks, 5-8 points
    complex: 0  # 6+ tasks, 13+ points

  files_generated: []
  # Example:
  # - "story-1-user-login.md"
  # - "story-2-user-logout.md"

# Requirements extracted from epics
requirements: []
# Example:
# - id: "REQ-1"
#   description: "User login with email/password"
#   epic: "epic-1"
#   complexity: "medium"
#   estimated_points: 5
#   estimated_tasks: 4
#   assigned_story: "STORY-1"

# Story batching strategy
batching:
  strategy: "dynamic"  # Based on complexity
  total_batches: 0
  batches_completed: 0

  batches: []
  # Example:
  # - batch_number: 1
  #   requirement_ids: ["REQ-2", "REQ-9", "REQ-15"]
  #   complexity: "simple"
  #   story_count: 10
  #   status: "completed"
  #   quality_score: 7.8
  #   refinement_attempts: 0

# Phase tracking
phases:
  story_creation:
    status: "pending"  # pending | in_progress | completed | failed
    started: null
    completed: null
    batches_completed: 0
    batches_total: 0
    avg_quality_score: null

  validation:
    status: "pending"
    started: null
    completed: null
    invest_compliant: null
    dependencies_valid: null
    ready_for_dev: null

  sprint_planning:
    status: "pending"
    started: null
    completed: null
    sprints_planned: 0
    total_points_planned: 0

# Quality tracking
quality:
  avg_story_score: null
  avg_invest_score: null
  avg_ac_score: null
  avg_task_score: null
  avg_deps_score: null
  avg_test_score: null

  stories_below_threshold: []
  # Example:
  # - story_id: "STORY-5"
  #   score: 5.2
  #   threshold: 6.0
  #   issues: ["AC not testable", "Tasks incomplete"]

# Dependency tracking
dependencies:
  story_level: {}
  # Example:
  # STORY-1:
  #   blocks: [STORY-2, STORY-5]
  #   depends_on: []

  epic_level: {}
  # Example:
  # epic-2:
  #   depends_on: [epic-1]

  technical: []
  # Example:
  # - name: "Auth Service"
  #   required_by: [STORY-1, STORY-3]

  circular: false
  circular_chains: []
  # Example:
  # - [STORY-1, STORY-5, STORY-3, STORY-1]

# Validation results
validation:
  invest_compliant: false
  dependencies_resolved: false
  ready_for_dev: false

  validation_report: null  # File path
  quality_scores_file: null
  issues_file: null

  issues:
    critical: 0
    high: 0
    medium: 0
    low: 0

# Sprint planning
sprint_plan:
  sprints_planned: 0
  total_points: 0
  avg_velocity: null
  backlog_count: 0

  team:
    size: null
    sprint_duration: null  # weeks
    availability: null  # percentage
    velocity_history: []

  capacity:
    target: null  # points
    buffer: null  # percentage
    confidence: null  # high|medium|low

  plan_file: null  # File path to sprint-plan.md
  backlog_file: null

# Progress metrics
progress:
  current_phase: "idle"  # idle | story_creation | validation | sprint_planning | completed
  percentage: 0

  epics_loaded: 0
  requirements_extracted: 0
  stories_created: 0
  stories_validated: 0
  sprints_planned: 0

# Workflow execution tracking
workflow:
  current_workflow: null  # create-stories | validate-stories | plan-sprint
  workflow_status: "idle"  # idle | running | completed | error
  started_at: null
  completed_at: null
  sub_sms_spawned: 0

# Warnings and issues
warnings: []
# Example:
# - timestamp: "2025-11-02T15:00:00Z"
#   level: "warning"  # info | warning | error | critical
#   message: "Batch 2 quality below threshold (5.5/10)"
#   source: "create-stories workflow"
#   phase: "story_creation"

# Next steps and recommendations
next_steps: []
# Example:
# - action: "Run validate-stories workflow"
#   reason: "Stories created but not validated"
#   priority: "high"  # high | medium | low
# - action: "Review story-5-oauth.md"
#   reason: "Quality below threshold (5.2/10)"
#   priority: "medium"

# Output tracking
output:
  stories_folder: null  # .bmad/stories/
  dependency_graph: null
  batch_summary: null
  validation_report: null
  sprint_plan: null
  backlog: null

  files_generated: []

# Metadata
metadata:
  enhanced_sm_version: "1.0"
  bmad_version: "6.0.0"
  project_root: null
  user_name: null
  communication_language: "German"

  input_source: null  # enhanced-pm | bmm-pm
  handoff_to: null    # enhanced-dev | bmm-dev
