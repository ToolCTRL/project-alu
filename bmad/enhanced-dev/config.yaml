# Enhanced Dev Module Configuration
# Generated: 2025-11-02

# Core config (from global BMAD config)
user_name: Raffael
communication_language: German
document_output_language: German
output_folder: '{project-root}/docs'

# Task locations
tasks_directory: '{project-root}/bmad/core/tasks'
scripts_directory: '{project-root}/bmad/core/scripts'

# Test configuration
run_tests_command: "npm test"
test_coverage_threshold: 80

# Retry and timeout configuration
max_task_retries: 3
max_fix_retries: 3
task_timeout_minutes: 15
max_loop_iterations: 10

# Git configuration
auto_commit: true
commit_on_task_complete: true
git_branch: "main"
git_remote: "origin"
create_tag: false

# Deployment configuration
auto_deploy: false
deploy_command: ""
deploy_target: "production"
pre_deploy_command: ""
post_deploy_command: ""

# Status tracking
status_location: "{project-root}/.bmad/enhanced-dev"
dev_status_file: "{project-root}/.bmad/enhanced-dev/status.yaml"

# Story location
story_location: "{project-root}/stories"

# Commit message template
commit_message_template: "feat: {task_description}\n\n- Implemented {task_id}\n- Tests: {test_status}\n- Coverage: {coverage}%\n\nðŸ¤– Generated by Enhanced Dev"

# Logging configuration
logging:
  terminal_log_level: "MINIMAL"  # SILENT, MINIMAL, NORMAL, VERBOSE, DEBUG
  file_log_level: "DEBUG"
  log_location: "{project-root}/.bmad/logs/"
  use_progress_bar: true
  batch_updates: true
  update_interval_seconds: 30
  compact_mode: true
  show_timestamps: false
  show_token_counts: false

# Context management
context_management:
  enable_auto_compression: true
  compression_threshold_light: 60000    # tokens
  compression_threshold_aggressive: 80000
  compression_threshold_emergency: 100000
  enable_external_memory: true
  memory_location: "{project-root}/.bmad/memory/"

# Event tracking
event_tracking:
  enable_events: true
  events_file: "{project-root}/.bmad/events.jsonl"

# Agent preferences
agent_preferences:
  prefer_enhanced: true  # Use enhanced-* agents when available

  # Agent mappings (enhanced â†’ fallback)
  agent_mapping:
    code-review:
      enhanced: "enhanced-code-review"
      fallback: "bmm-code-review"
    test-architect:
      enhanced: "enhanced-test-architect"
      fallback: "bmm-test-architect"
    pm:
      enhanced: "enhanced-pm"
      fallback: "bmm-pm"
    sm:
      enhanced: "enhanced-sm"
      fallback: "bmm-sm"

# Visual Testing & Documentation (Frontend)
visual_testing:
  enabled: true
  required_for_frontend: true  # Force for frontend stories/tasks

  # Output structure
  artifacts_root: "{project-root}/.visual-artifacts"
  folder_structure: "{artifacts_root}/{story_id}/{task_id}/{type}"

  # Screenshot configuration
  screenshots:
    enabled: true
    states: ["default", "hover", "focus", "active", "error", "loading", "disabled"]
    viewports:
      mobile: "375x667"
      tablet: "768x1024"
      desktop: "1920x1080"
    format: "png"
    quality: 90

  # E2E Testing with Playwright
  e2e:
    enabled: true
    tool: "playwright"  # or "cypress"
    trace: true  # Waterfall view
    video: true
    screenshots_on_failure: true
    output_dir: "{artifacts_root}/{story_id}/{task_id}/e2e"

  # Component visual documentation
  components:
    enabled: true
    capture_all_variants: true  # All props/states combinations
    storybook_integration: false
    output_dir: "{artifacts_root}/{story_id}/{task_id}/components"

  # Timeline/Waterfall visualization
  timeline:
    enabled: true
    capture_network: true
    capture_rendering: true
    capture_interactions: true
    format: "html"  # Interactive HTML timeline
    output_file: "{artifacts_root}/{story_id}/{task_id}/timeline.html"

  # Performance metrics
  performance:
    enabled: true
    lighthouse: true
    web_vitals: true
    output_file: "{artifacts_root}/{story_id}/{task_id}/performance.json"

  # Accessibility testing
  a11y:
    enabled: true
    tool: "axe-core"
    output_file: "{artifacts_root}/{story_id}/{task_id}/a11y-report.json"

  # Visual regression testing
  visual_regression:
    enabled: false  # Optional
    baseline_dir: "{project-root}/.visual-baselines"
    diff_threshold: 0.1  # 10% difference allowed

  # Organization
  organization:
    by_story: true
    by_component: true
    by_test_run: true
    keep_history: true
    max_history_runs: 5
    cleanup_old: true

  # Index generation
  auto_index:
    enabled: true
    format: "html"  # HTML gallery with thumbnails
    output_file: "{artifacts_root}/index.html"

# Module metadata
module_version: "1.0.0"
installed_date: "2025-11-02"
